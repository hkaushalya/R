{
    "contents" : "rm(list=ls())\n#preprocessor of FNAL Thesis data\n\nlibrary(gdata)  # use 'trim' to remove white spaces in strings\n\n\nraw.data <- readLines('data/cdf_all_raw.txt')\nhead(raw.data, n=10)\n\n#raw format\n#Year (4digits)\n#Author\n#Institution\n#Advisor\n#Graduation Date\n#Title\n\nauthor     <- NULL\nadvisor    <- NULL\ngrad.month <- NULL   #need to strip out the month\ngrad.year  <- NULL   #need to strip out the month\ntitle      <- NULL   # character string\nexperiment  <- NULL   # reading CDF data\ninstitution <- NULL\nfoundheader <- FALSE\n\n\nMonthYear <- function(vec) {\n  nums1 <- gsub(\"[^[:digit:]]\",\"\", vec) # this strips out all the letters\n  ltrs1 <- gsub(\"[[:digit:]]\",\"\", vec)  # this strips all the numbers\n  #if (length(nums1)>1)\n  #{\n    print(nums1)\n  #}\n  nums1.clean <- nums1[nchar(nums1)!=0]  # remove 0 length\n  ltrs1.clean <- ltrs1[nchar(ltrs1)!=0] \n  ltrs2.clean <- gsub('[[:punct:]]','',ltrs1.clean)  # removes ',' \n  nums <- as.numeric(trim(nums1.clean))\n  ltrs <- trim(ltrs2.clean)\n  #if (length(nums1)>1) print(nums)\n  print(nums)\n  return (list(yr=nums[length(nums)], mo=ltrs[1]))\n}\n\ni <- 1\nr <- 0\nindices <- grep(\"Author:\", raw.data)\nlen <- length(indices)\n\nfor (i in 1:len) {\n  print(cat('==============================\\n'))\n  r <- r + 1\n  f_ind <- indices[i]\n  if (i==len) { # if this is the last record\n    l_ind <- length(raw.data)\n  } else {\n    l_ind <- indices[i+1]\n    l_ind <- l_ind - 1\n  }\n  #print(cat('last =', l_ind,'\\n'))\n  data <- raw.data[f_ind:l_ind]\n  #print(data)\n  #if (r > 2) break\n  \n  exp <- \"CDF\"\n  #print(paste(data, '->', class(data)))\n  au <- grep('Author'         , data, value=TRUE)\n  it <- grep('Institution'    , data, value=TRUE)\n  ad <- grep('Advisor'        , data, value=TRUE)\n  gd <- grep('Graduation Date', data, value=TRUE)\n  ti <- grep('Title'          , data, value=TRUE)\n  \n  \n  \n  if (length(au) != 0) {\n    au<-trim(sub('Author:','',au))\n    #cat('au->',au,'\\n')\n  } else { au <- NA}\n  if (length(it) != 0) {\n    it<-trim(sub('Institution:','',it))\n    #cat('it->',it,'\\n')\n  } else { au <- NA }\n\n  if (length(ad) != 0) {\n    ad<-trim(sub('Advisor:','',ad))\n    #cat('ad->',ad,'\\n')\n  } else {\n    ad <- NA\n    #cat ('length of ad -> ', nchar(ad), '\\n')\n  }\n  \n  mo <- NA\n  yr <- NA\n  if (length(gd)!=0) {\n    gd<-sub('Graduation Date:','',gd)\n    dd <- MonthYear(gd)\n    mo <- ifelse (nchar(dd$mo) !=0, dd$mo, NA)\n    yr <- ifelse (nchar(dd$yr) !=0, dd$yr, NA)\n    #print(cat('mo/yr =', dd$mo, \"/\", dd$yr,\"\\n\") )\n      \n  } else {gd <- NA}\n  \n  if (length(ti)!=0) {\n    ti<-trim(sub('Title:','',ti))\n    #cat('ti->',ti,'\\n')\n  } else { ti <- NA}\n  \n  \n  \n  author[r]      <- as.character(au)\n  institution[r] <- as.character(it)\n  advisor[r]     <- ifelse(nchar(ad)>0,ad,NA)\n  grad.month[r]  <- as.character(mo)\n  grad.year[r]   <- as.numeric(yr)\n  title[r]       <- as.character(ti)\n  experiment[r]  <- as.character(exp)\n  \n  rm(data, au, it, ad, gd, ti, exp, mo, yr)\n}\n\n#df <- data.frame(rbind(grad.year, grad.year, experiment, institution, advisor, author, title))\ndf <- data.frame(cbind(grad.year, grad.month, experiment, institution, author, title))\nhead(df)\nwrite.csv(df, 'data/preprocess1.csv')",
    "created" : 1384437993721.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1562719267",
    "id" : "E0F2F631",
    "lastKnownWriteTime" : 1384488558,
    "path" : "~/Documents/Personal/Samantha/LearningMaterials/IntroToR/RandomExercises/FermilabDissertation/preprocessor.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_source"
}